<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Signature Recovery</title>

<link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">
<style>

/* ===== BASE ===== */
body{
  margin:0;
  height:100vh;
  background:
radial-gradient(circle at 50% 50%, #021d14, #000 70%),
repeating-linear-gradient(
  0deg,
  rgba(0,255,156,.04),
  rgba(0,255,156,.04) 1px,
  transparent 1px,
  transparent 2px
);
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:'Special Elite', monospace;
  color:#00ff9c;
  overflow:hidden;
}

/* ===== MAIN ===== */
.container{
  width:440px;
  text-align:center;
}

.title{font-size:26px;margin-bottom:18px;}
.typed{font-size:28px;color:#ff4d4d;margin-bottom:18px;min-height:32px;}

canvas{
  width:100%;
  height:150px;
  border:1px solid rgba(0,255,156,.3);
  background:#020202;
  border-radius:6px;
}

.btn{
  margin-top:18px;
  padding:10px 28px;
  border:none;
  background:#00ff9c;
  color:black;
  font-size:18px;
  cursor:pointer;
  border-radius:4px;
  box-shadow:0 0 12px rgba(0,255,156,.7);
}

/* ===== WHITE LOADER ===== */
#loader{
  display:none;
  text-align:center;
  color:#222;
}

.loading-text{
  font-size:30px;
  margin-bottom:12px;
}

.bar{
  width:260px;
  height:6px;
  background:#eee;
  border-radius:20px;
  overflow:hidden;
  margin:auto;
}

.progress{
  height:100%;
  width:0%;
  background:#ff4d4d;
  transition:.15s linear;
}

.percent{
  margin-top:10px;
  font-size:22px;
}

#boot{
  position:fixed;
  inset:0;
  background:#000;
  color:#00ff9c;
  font-family:monospace;
  font-size:12px;
  padding:20px;
  z-index:9999;
  display:flex;
  align-items:flex-start;
  justify-content:flex-start;
}

.boot-glitch{
  animation:bootGlitch .08s infinite;
}

@keyframes bootGlitch{
  0%{transform:translate(0);}
  50%{transform:translate(-2px,1px);}
  100%{transform:translate(2px,-1px);}
}
.lag{
  animation:lag .18s infinite;
}

@keyframes lag{
  0%{transform:translate(0);}
  25%{transform:translate(-4px,2px);}
  50%{transform:translate(3px,-2px);}
  75%{transform:translate(-2px,3px);}
  100%{transform:translate(0);}
}

.scanPulse{
  position:fixed;
  inset:0;
  background:radial-gradient(circle, rgba(0,255,156,.12), transparent 60%);
  animation:pulse 1.2s infinite;
}
@keyframes pulse{
  0%,100%{opacity:.3;}
  50%{opacity:.9;}
}
@keyframes microGlitch{
  0%,100%{opacity:1}
  50%{opacity:.85}
}
.container{
  animation:microGlitch 2.5s infinite;
}
#boot{ transition:opacity .3s ease; }
/* ===== EXTREME GLITCH CORE ===== */

.extremeGlitch{
  animation:extremeGlitch .045s infinite;
}

@keyframes extremeGlitch{
  0%{transform:translate(0,0) skew(0deg);}
  10%{transform:translate(-12px,6px) skew(-2deg);}
  20%{transform:translate(10px,-7px) skew(2deg);}
  30%{transform:translate(-8px,10px) skew(0deg);}
  40%{transform:translate(6px,-12px) skew(-1deg);}
  50%{transform:translate(0,0) skew(0deg);}
  60%{transform:translate(12px,5px) skew(2deg);}
  70%{transform:translate(-10px,-8px) skew(-2deg);}
  80%{transform:translate(7px,9px) skew(0deg);}
  90%{transform:translate(-6px,-10px) skew(1deg);}
  100%{transform:translate(0,0) skew(0deg);}
}

/* ===== RGB SURGE ===== */

.rgbSurge::before,
.rgbSurge::after{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  mix-blend-mode:screen;
}

.rgbSurge::before{
  background:rgba(255,0,0,.08);
  transform:translate(6px,0);
}

.rgbSurge::after{
  background:rgba(0,255,255,.08);
  transform:translate(-6px,0);
}

/* ===== SCREEN TEAR ===== */

.tear{
  position:fixed;
  left:0;
  right:0;
  height:3px;
  background:#00ff9c;
  box-shadow:0 0 10px #00ff9c;
  animation:tearMove .25s linear infinite;
}

@keyframes tearMove{
  from{top:0;}
  to{top:100%;}
}

/* ===== NOISE ===== */

.noise::before{
  content:"";
  position:fixed;
  inset:0;
  background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAABAfUpZAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKklEQVR4nO3BMQEAAADCoPdPbQ43oAAAAAAAAAAAAAAAAAAAAAAAAAAAAPwG2mAAAZv1mV8AAAAASUVORK5CYII=");
  opacity:.08;
  pointer-events:none;
}

/* ===== FRAME SKIP ===== */

.freeze{
  animation:freeze .08s steps(2) infinite;
}
@keyframes freeze{
  50%{opacity:.6}
}

/* ===== EXTREME GLITCH SYSTEM ===== */

#glitch{
  position:fixed;
  inset:0;
  background:
    repeating-linear-gradient(
      0deg,
      rgba(0,255,156,.05),
      rgba(0,255,156,.05) 1px,
      transparent 1px,
      transparent 2px
    ),
    black;

  color:#00ff9c;
  font-family:monospace;
  font-size:12px;
  padding:20px;
  opacity:0;
  pointer-events:none;
  white-space:pre-wrap;
  overflow:hidden;
}

/* MASSIVE SHAKE */
.extremeGlitch{
  animation:extremeGlitch .045s infinite;
}

@keyframes extremeGlitch{
  0%{transform:translate(0,0) skew(0deg);}
  10%{transform:translate(-12px,6px) skew(-2deg);}
  20%{transform:translate(10px,-7px) skew(2deg);}
  30%{transform:translate(-8px,10px) skew(0deg);}
  40%{transform:translate(6px,-12px) skew(-1deg);}
  50%{transform:translate(0,0) skew(0deg);}
  60%{transform:translate(12px,5px) skew(2deg);}
  70%{transform:translate(-10px,-8px) skew(-2deg);}
  80%{transform:translate(7px,9px) skew(0deg);}
  90%{transform:translate(-6px,-10px) skew(1deg);}
  100%{transform:translate(0,0) skew(0deg);}
}

/* RGB SEPARATION */
.rgbSurge::before,
.rgbSurge::after{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  mix-blend-mode:screen;
}

.rgbSurge::before{
  background:rgba(255,0,0,.08);
  transform:translate(6px,0);
}

.rgbSurge::after{
  background:rgba(0,255,255,.08);
  transform:translate(-6px,0);
}

/* SCREEN TEARING */
.tear{
  position:fixed;
  left:0;
  right:0;
  height:3px;
  background:#00ff9c;
  box-shadow:0 0 10px #00ff9c;
  animation:tearMove .25s linear infinite;
}

@keyframes tearMove{
  from{top:0;}
  to{top:100%;}
}

/* NOISE OVERLAY */
.noise::before{
  content:"";
  position:fixed;
  inset:0;
  background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAABAfUpZAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKklEQVR4nO3BMQEAAADCoPdPbQ43oAAAAAAAAAAAAAAAAAAAAAAAAAAAAPwG2mAAAZv1mV8AAAAASUVORK5CYII=");
  opacity:.08;
  pointer-events:none;
}

/* FRAME SKIP */
.freeze{
  animation:freeze .08s steps(2) infinite;
}

@keyframes freeze{
  50%{opacity:.6}
}

/* OLD LAG (still used) */
.lag{
  animation:lag .18s infinite;
}

@keyframes lag{
  0%{transform:translate(0);}
  25%{transform:translate(-4px,2px);}
  50%{transform:translate(3px,-2px);}
  75%{transform:translate(-2px,3px);}
  100%{transform:translate(0);}
}

</style>
</head>

<body>
<div id="boot">
  <pre id="bootText"></pre>
</div>

<div class="container" id="main">
  <div class="title">To restore the website, sign the declaration below:</div>
  <div id="typed" class="typed"></div>
  <canvas id="pad"></canvas>
  <button class="btn" onclick="submitSignature()">Submit Signature</button>
</div>

<div id="glitch"></div>
<div id="loader">
  <div class="loading-text">Restoring Website...</div>
  <div class="bar"><div class="progress" id="bar"></div></div>
  <div class="percent" id="percent">0%</div>
</div>

<audio id="crashSound" src="crash.mp3"></audio>

<script>
const bootLines = [
  "INITIALIZING CORE...",
  "RECOVERING MEMORY...",
  "SIGNATURE MODULE DAMAGED...",
  "ATTEMPTING REBUILD...",
  "ERROR: IDENTITY MISMATCH",
  "SYNCING WITH SUBJECT...",
  "LOADING INTERFACE..."
];

const boot = document.getElementById("boot");
const bootText = document.getElementById("bootText");

let bi = 0;

function bootSeq(){
  if(bi >= bootLines.length){
    setTimeout(()=>{
      boot.style.opacity=0;
      setTimeout(()=>boot.remove(),300);
    },400);
    return;
  }

  boot.classList.add("boot-glitch");
  bootText.innerText += bootLines[bi] + "\n";
  bi++;

  setTimeout(()=>{
    boot.classList.remove("boot-glitch");
    setTimeout(bootSeq,120);
  },90);
}
bootSeq();

/* TYPE TEXT */
const text="RELATIONSHIP DOCUMENT — CONFIDENTIAL";
const typed=document.getElementById("typed");
let i=0;
(function type(){if(i<text.length){typed.innerText+=text[i++];setTimeout(type,55);}})();

/* SIGN PAD */
const canvas=document.getElementById("pad");
const ctx=canvas.getContext("2d");
canvas.width = canvas.offsetWidth;
canvas.height = canvas.offsetHeight;
let drawing=false, points=[];
canvas.addEventListener("mousedown",()=>drawing=true);
canvas.addEventListener("mouseup",()=>{
  drawing=false;
  ctx.beginPath();
});
canvas.addEventListener("mousemove",e=>{
  if(!drawing) return;
  const x=e.offsetX,y=e.offsetY;
  points.push({x,y});
  ctx.lineWidth=2;
  ctx.strokeStyle="#00ff9c";
  ctx.lineCap="round";
  ctx.lineTo(x,y);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(x,y);
});

/* DETECT N */
function detectN(){
  if(points.length<25) return false;
  let up=0,down=0;
  for(let i=1;i<points.length;i++){
    if(points[i].y<points[i-1].y) up++;
    if(points[i].y>points[i-1].y) down++;
  }
  return(up>10&&down>10);
}

/* DRAMATIC GLITCH */
function generateGlitch(){
  const chars="01#@$%&ERRORNULLVOID<>/█▓▒░";
  let code="";
  for(let i=0;i<1500;i++){
    code+=chars[Math.floor(Math.random()*chars.length)];
    if(i%100===0) code+="\n";
  }
  return code;
}

/* SUBMIT */
function submitSignature(){

  if(!detectN()){
    typed.innerText="SIGNATURE NOT VALID.";
    return;
  }

  // INITIAL LAG
  document.body.classList.add("lag");

  const pulse=document.createElement("div");
  pulse.className="scanPulse";
  document.body.appendChild(pulse);

  setTimeout(()=>{
    document.body.classList.remove("lag");
    pulse.remove();

    document.getElementById("main").style.display="none";

    const glitch=document.getElementById("glitch");
    glitch.innerText=generateGlitch();
    glitch.style.opacity=.98;

    document.getElementById("crashSound").play().catch(()=>{});

    // EXTREME GLITCH ACTIVATION
    document.body.classList.add("extremeGlitch");
    document.body.classList.add("rgbSurge");
    document.body.classList.add("noise");

    // SCREEN TEARING
    let tears=[];
    for(let i=0;i<6;i++){
      const t=document.createElement("div");
      t.className="tear";
      t.style.animationDelay=(Math.random()*0.25)+"s";
      document.body.appendChild(t);
      tears.push(t);
    }

    // RANDOM INSTABILITY
    let instability=setInterval(()=>{
      document.body.classList.toggle("lag");
      document.body.classList.toggle("freeze");
    },70);

    // TEXT CORRUPTION BURST
    let corrupt=setInterval(()=>{
      glitch.innerText=generateGlitch();
    },120);

    setTimeout(()=>{

      glitch.style.opacity=0;

      document.body.classList.remove("extremeGlitch");
      document.body.classList.remove("rgbSurge");
      document.body.classList.remove("noise");
      document.body.classList.remove("lag");
      document.body.classList.remove("freeze");

      clearInterval(instability);
      clearInterval(corrupt);

      tears.forEach(t=>t.remove());

      const f=document.createElement("div");
      f.className="flash";
      document.body.appendChild(f);

      setTimeout(startLoader,300);

    },1100);

  },1200);
}
function startLoader(){

  document.body.style.background="white";
  document.body.style.color="#222";

  const loader=document.getElementById("loader");
  loader.style.display="block";

  let p=0;
  const bar=document.getElementById("bar");
  const percent=document.getElementById("percent");

  const load=setInterval(()=>{

    p++;
    bar.style.width=p+"%";
    percent.innerText=p+"%";

    if(p>=100){
      clearInterval(load);

      setTimeout(()=>{
        if(parent && parent.nextScene){
          parent.nextScene();
        }
      },600);
    }

  },26);
}

</script>
</body>
</html>